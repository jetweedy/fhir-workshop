
<?php
include("./fun.php");

/*
$sandbox = "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/DSTU2";
$authurl = "https://fhir.epic.com/interconnect-fhir-oauth/oauth2/authorize";
$authurl = "https://r3.smarthealthit.org";
$client_id = "43cb586a-0ca1-44af-b195-3f2e72365714";
$redirect_uri = "https://jonathantweedy.com/FHIR/openepic/redirect_uri.php";
$url = $authurl."?";
$url .= "response_type=code";
$url .= "client_id=".$client_id;
$url .= "redirect_uri=".urlencode($redirect_url);
$url .= "scope=Patient.read";
$url .= "state=abc123";
//$url .= "aud=".urlencode("https://fhir.epic.com/interconnect-fhir-oauth/api/fhir/dstu2");

//// -------------------------------------------------------------------------------------
//// This is the sample URL they give... it takes me to a generic mychart login page:
//// -------------------------------------------------------------------------------------
$url = $authurl."?response_type=code&redirect_uri=https%3A%2F%2Fjonathantweedy.com%2FFHIR%2Fopenepic%2Fredirect_uri.php&client_id=".$client_id."&state=abc123";
print $url;
//// -------------------------------------------------------------------------------------
*/

/*
      FHIR.oauth2.authorize({
        client_id: "43cb586a-0ca1-44af-b195-3f2e72365714",
        iss: "https://r3.smarthealthit.org",
        scope: "patient/Patient.read patient/Observation.read patient/Immunization.read launch online_access openid profile",
        redirectUri: "https://jonathantweedy.com/FHIR/openepic/app.php"
      });
*/

?>